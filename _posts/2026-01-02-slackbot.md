---
layout: post
title: "SQL 데이터 요청 Slack Bot"
date: 2026-01-02
categories: [Automation]
author: Hyerin Yu
excerpt: "" 
thumbnail: /assets/thumbnail/slackbot_sql.png
tag: "Automation"
---

# 들어가며 
나의 첫 자동화 경험은 아주 작고 보잘것없어 보일지도 모르지만 뿌듯했다. 
부동산 사무실 계약서 스캔 아르바이트에서 공통된 페이지를 찾아 날인이나 특이사항이 있는 부분만 스캔해 후에 자동으로 삽입하는 방식을
만들어 예정된 작업일에서 하루를 절약하고 휴식 시간을 충분히 가질 수 있었다.. 😂

사소한 자동화라도 항상 묘한 뿌듯함과 재미가 있는 것 같다. 

슬랙봇 자동화는 적어도 1년 이상 전부터 여기저기서 자주 보이던 주제였지만, 막상 개인적으로 테스트해볼 만한 계기가 없었다.
그러던 중 현직 데이터 분석가 분의 데이터 요청에 대한 업무에서 커뮤니케이션 문제에 대한 포스트를 보게 되었고

데이터 요청에 대한 내용의 요청서를 만들고 
LLM 모델과 결합해 최종 요구 사항을 보다 쉽고 빠르게 만드는 프로세스를 생각해보았다. 


---

## 문제 인식  

> “데이터 요청의 절반은 분석이 아니라 커뮤니케이션에서 시간이 소모된다.”

그 글에서는 메신저로 들어오는 데이터 요청이 보통 다음과 같은 문제를 가진다고 설명하고 있었다.

- 분석 기간이 불명확하다  
- 대상 정의가 모호하다  
- 지표와 목적이 섞여 있다  
- 요청자와 분석가 간 해석 차이가 발생한다  

결국 분석가는 항상 같은 질문을 다시 던지게 된다.

> “기간이 언제까지인가요?”  
> “모바일만 보나요?”  
> “이 지표는 왜 필요한가요?”

이 과정은 단순한 커뮤니케이션 문제처럼 보이지만,  
실제로는 **분석 리드타임을 늘리고 협업 비용을 증가시키는 문제**라는 점이 인상 깊었다.

---

## 목표 설정  
### “요청을 처음부터 구조화된 형태로 받자”

요청자가 요청 양식에 맞게 작성하고,
그 내용을 기반으로 LLM이 요청을 정리하고 지표 후보를 추천하며,
분석가는 추가 질문 없이 바로 이해할 수 있는 요청서를 받도록 만들자.

---

## 설계 아이디어  
### Slack + 요청서 + LLM 보조

이 프로젝트에서 LLM의 역할은 명확하게 제한했다.

LLM은<br>
❌ 분석을 대신하지 않는다 <br>
❌ SQL을 생성하지 않는다<br>
❌ 결과를 해석하지 않는다<br>

대신 다음 역할만 수행한다.

> 요청 내용을 정리하고,
> Metric Dictionary 기반 지표 후보를 추천하는 보조자

전체 흐름은 단순하다.


---


## 전체 처리 흐름

		1️⃣ 요청자가 Slack 명령어로 요청서 모달을 연다
		2️⃣ 요청 양식에 맞춰 입력한다
		3️⃣ LLM이 요청 의도를 문서 형태로 정리한다
		4️⃣ Metric Dictionary 기반으로 관련 지표를 추천한다 (필요 시)
		5️⃣ 정리된 요청서를 요청자에게 다시 보여준다
		6️⃣ 확인 후 최종 공유된다



---

## Slack 요청 모달 구조

요청자는 자유 텍스트가 아니라
구조화된 입력 폼에 맞춰 요청을 작성한다.

예를 들어 다음과 같은 필드를 받는다.<br>

	•	핵심 질문 
	•	기간
	•	데이터 대상
	•	포함 / 제외 조건
	•	원하는 출력 형태
	•	알고 있는 지표 (선택)

<div style="display:flex; justify-content:center; gap:16px;">
  <img src="/assets/Screenshot.png" width="290">
</div>



---

## LLM 역할 

1️⃣ 요청서 문장 정리 <br>
2️⃣ Metric Dictionary 기반 지표 추천

      사전에 정의된 Metric Dictionary를 기반으로
      요청 의도와 관련 있는 지표를 추천한다.
      
      예:
      	•	rec_ctr
      	•	purchase_conversion_rate
      	•	retention_d7
      	•	good_rec_rate_proxy
      
      중요한 원칙:
      	•	사전에 정의된 지표만 추천
      	•	없는 지표는 새로 만들지 않음
      	•	필요 시 “추가 정의 필요”로 표시
      
     
      ( LLM이 지표를 창작하지 않도록 설계했다.)

3️⃣ 재확인 가능한 요청서 생성

      요청자에게 먼저 보여준다.

      “이 내용이 맞습니까?”
      
      	•	맞으면 확정
      	•	아니면 수정
		
<div style="display:flex; justify-content:center; gap:16px;">
  <img src="/assets/result_slack.png" width="350">
</div>


---


## 비용 ... 
LLM은 토큰 비용 문제가 있는데 <br>
일단 이를 고려해서 최대한 단순하게 설계했다. 

	•	요청은 반드시 구조화 폼으로만 받는다
	•	필수 필드가 비어 있으면 LLM 호출 안 함
	•	Metric 추천도 Dictionary 기반으로 제한
	•	한 번의 호출로 요약 + 추천까지 처리

---

# 마치며 
가볍게 실습해보기 좋은 프로젝트였다. <br>
근데 직접 붙여보고 흐름을 설계해보니 생각할 것들이 많았다. <br>
이를 테면.. 

	•	이게 실무에서 정말 필요한 수준의 자동화일까?
	•	요청자에게 요청서가 어떻게 느껴질지, 더 직관적일 수는 없는지?
	•	토큰 비용은 어떻게 관리해야 할까?

작지만 재미있었고 <br>
“요청 → 정리 → 확인” 흐름을 자동화해본<br>
첫 실험으로 의미 있는 경험이었다.<br>

