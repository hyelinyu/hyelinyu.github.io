---
layout: post
title: "SQL 데이터 요청 Slack Bot"
date: 2026-01-02
categories: [Automation]
author: Hyerin Yu
excerpt: "" 
thumbnail: /assets/thumbnail/slackbot_sql.png
tag: "Automation"
---

# 들어가며 
나의 첫 자동화 경험은 아주 작고 보잘것없어 보일지도 모르지만 뿌듯했다. 
부동산 중개 사무실에서 계약서 스캔 아르바이트 약 한 주 동안 했는데, 페이지 수만 15장에 달하는 계약서 약 1,000부를 하나하나 스캔해 컴퓨터에 문서화하는 작업이었다. 
처음에는 아무 생각 없이 손으로만 처리했다. 하루하고 나서 지쳐버렸다. 자연스럽게 빨리 할 방법을 생각했다..

계약서를 다시 살펴보니 대부분의 계약서에 날인이나 특이사항이 없는 공통 페이지가 약 6장씩 반복되고 있었다. 그래서 이 페이지들을 아예 스캔 대상에서 제외하고, 
필요한 부분만 스캔한 뒤 코드로 공통 페이지를 알맞은 위치에 자동으로 삽입하는 방식을 만들었다.

결과적으로 예정된 작업 일정에서 하루를 절약할 수 있었다.
사소한 자동화라도 항상 묘한 뿌듯함과 재미가 있다. 

슬랙봇 자동화는 적어도 1년 이상 전부터 여기저기서 자주 보이던 주제였지만, 막상 개인적으로 테스트해볼 만한 계기가 없었다.
그러던 중 현직 데이터 분석가 분의 데이터 요청에 대한 업무에서 커뮤니케이션 문제에 대한 포스트를 보게 되었고

데이터 요청에 대한 내용의 요청서를 만들고 
LLM 모델과 결합해 최종 요구 사항을 보다 쉽고 빠르게 만드는 프로세스를 생각해보았다. 


---

## 문제 인식  
### “데이터 요청은 왜 항상 다시 묻게 될까?”

Slack 봇 자동화는 사실 1년 이상 전부터 여기저기서 자주 보이던 주제였다.  
하지만 개인적으로 직접 만들어볼 계기는 딱히 없었다.

그러던 중, 평소처럼 링크드인과 블로그를 보며 현직자들의 글을 읽다가  
한 데이터 분석가 분의 글을 보게 되었다.

> “데이터 요청의 절반은 분석이 아니라 커뮤니케이션에서 시간이 소모된다.”

그 글에서는 메신저로 들어오는 데이터 요청이 보통 다음과 같은 문제를 가진다고 설명하고 있었다.

- 분석 기간이 불명확하다  
- 대상 정의가 모호하다  
- 지표와 목적이 섞여 있다  
- 요청자와 분석가 간 해석 차이가 발생한다  

결국 분석가는 항상 같은 질문을 다시 던지게 된다.

> “기간이 언제까지인가요?”  
> “모바일만 보나요?”  
> “이 지표는 왜 필요한가요?”

이 과정은 단순한 커뮤니케이션 문제처럼 보이지만,  
실제로는 **분석 리드타임을 늘리고 협업 비용을 증가시키는 구조적 문제**라는 점이 인상 깊었다.

---

## 목표 설정  
### “요청을 처음부터 문서화된 형태로 받자”

이 문제를 보면서 자연스럽게 목표가 정리됐다.

> **분석가가 다시 질문하지 않아도 되는 상태의 요청서를, 처음부터 받을 수는 없을까?**

중요한 포인트는 두 가지였다.

1. 요청자는 SQL이나 지표 정의를 몰라도 된다  
2. 대신, 요청의 의도와 맥락은 구조화되어야 한다  

그래서 단순히 “폼을 받는 Slack 봇”이 아니라,  
**요청을 실무 문서 형태로 정리해주는 보조자**를 만들기로 했다.

---

## 설계 아이디어  
### Slack + LLM

이 프로젝트에서 LLM의 역할은 **분석을 대신하는 것**이 아니라,  
**요청을 구조화하고 표준화하는 것**으로 명확히 제한했다.


1. **요청서 문장화 / 정리**  
   - 모달에서 받은 입력(기간, 대상, 조건, 출력 형태 등)을  
     실무 분석 요청서 형태의 문장으로 정리한다.
     
![슬랙 모달 요청서 예시](assets/Screenshot.png)

2. **Metric Dictionary 기반 지표 추천**  
   - 사용자의 핵심 질문을 기준으로  
     사전에 정의된 Metric Dictionary 안에서 관련 지표 3~5개를 추천한다.  
   - 사전에 없는 지표는 새로 만들지 않고 “추가 정의 필요”로 표시한다.

3. **재확인 가능한 요청서 초안 생성**  
   - “제가 이해한 요청은 다음과 같습니다” 형태의 초안을 만들고  
     사용자가 확인한 뒤에만 최종 공유한다.

즉, LLM은 **분석가를 대체하는 존재가 아니라**,  
분석 요청을 **사람이 읽을 수 있는 문서로 바꿔주는 편집기** 역할이다.



---


### 모델 호출 전에 ‘프리뷰’ 단계를 넣다

LLM을 붙이면서 가장 현실적인 문제는 **토큰 비용**이었다.

요청이 정리되지 않은 상태에서 바로 모델을 호출하면,
- 불필요한 토큰이 발생하고  
- 결과가 애매해 다시 호출하게 되고  
- 결국 비용과 피로만 늘어난다  

그래서 흐름을 다음과 같이 설계했다.

1. `/datarequest` 명령어로 모달 입력  
2. 제출 시 **LLM을 바로 호출하지 않는다**  
3. 대신, rule-based로 만든 **요청서 프리뷰(요금 0원)**를 DM으로 전달  
4. 사용자가 내용을 확인한 뒤  
   - “이대로 LLM 요약 생성”을 누르면 그때만 모델 호출  
   - 아니면 다시 수정  





---



## 결과  
### “다시 묻지 않아도 되는 데이터 요청”

최종적으로 이 Slack 봇이 만들어내는 것은  
단순한 메시지가 아니라 다음 요소를 모두 포함한 **요청서**였다.

- 요청 의도 (왜 보고 싶은가)  
- 데이터 범위 (기간 / 대상 / 조건)  
- Metric Dictionary 기반 지표 후보  
- 출력 형태 및 자동화 여부  



